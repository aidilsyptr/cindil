<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Galeri Media</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #f5f5f5;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #fff;
      padding: 20px;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .tabs {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }
    .tab-btn {
      padding: 10px 20px;
      cursor: pointer;
      background: #ddd;
      border: none;
      margin: 0 5px;
      font-weight: bold;
    }
    .tab-btn.active {
      background: #a00;
      color: white;
    }
    .tab-content {
      display: none;
      padding: 20px;
    }
    .tab-content.active {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 15px;
    }
    .media-item {
      background: #fff;
      padding: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .media-item img, video {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 5px;
    }
    .no-media {
      grid-column: 1/-1;
      text-align: center;
      color: #888;
    }
  </style>
</head>
<body>

<header>
  <h1>Galeri Media</h1>
  <p>Menampilkan file yang tersedia dari folder <code>media/</code></p>
</header>

<div class="tabs">
  <button class="tab-btn active" data-tab="photos">Foto</button>
  <button class="tab-btn" data-tab="videos">Video</button>
</div>

<div id="photos" class="tab-content active"></div>
<div id="videos" class="tab-content"></div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const photoContainer = document.getElementById("photos");
    const videoContainer = document.getElementById("videos");

    const imageExtensions = ["jpg", "png", "HEIC"];
    const maxFiles = 50;

    // Fungsi cek file gambar
    const checkImageExists = (url, callback) => {
      const img = new Image();
      img.onload = () => callback(true, url);
      img.onerror = () => callback(false, url);
      img.src = url;
    };

    // Fungsi cek file video
    const checkVideoExists = (url, callback) => {
      const video = document.createElement("video");
      video.onloadeddata = () => callback(true, url);
      video.onerror = () => callback(false, url);
      video.src = url;
    };

    // Cek dan tampilkan gambar yang ada
    for (let i = 1; i <= maxFiles; i++) {
      imageExtensions.forEach(ext => {
        const path = `media/${i}.${ext}`;
        checkImageExists(path, (exists, url) => {
          if (exists) {
            const item = document.createElement("div");
            item.className = "media-item";
            item.innerHTML = `<img src="${url}" alt="Foto ${url}">`;
            photoContainer.appendChild(item);
          }
        });
      });
    }

    // Cek dan tampilkan video yang ada
    for (let i = 1; i <= maxFiles; i++) {
      const path = `media/${i}.mp4`;
      checkVideoExists(path, (exists, url) => {
        if (exists) {
          const item = document.createElement("div");
          item.className = "media-item";
          item.innerHTML = `
            <video autoplay loop muted playsinline>
              <source src="${url}" type="video/mp4">
              Browser Anda tidak mendukung tag video.
            </video>`;
          videoContainer.appendChild(item);
        }
      });
    }

    // Tab kontrol
    const tabButtons = document.querySelectorAll(".tab-btn");
    const tabContents = document.querySelectorAll(".tab-content");

    tabButtons.forEach(button => {
      button.addEventListener("click", () => {
        const target = button.getAttribute("data-tab");

        tabButtons.forEach(btn => btn.classList.remove("active"));
        tabContents.forEach(content => content.classList.remove("active"));

        button.classList.add("active");
        document.getElementById(target).classList.add("active");
      });
    });
  });
</script>

</body>
</html>
